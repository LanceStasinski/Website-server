(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{327:function(e,t,n){"use strict";n.r(t);var r=n(55),a=n(53),c=n.n(a),o=n(54),s=n(9),u=n(1),i=n.n(u),d=n(78),l=n(90),b=n.n(l),h=n(12),j=n(58),m=n(51),f=n(60),p=n(61),_=n(22),O=n(0),x="https://lancestasinski.herokuapp.com/api";t.default=function(){document.title="Login | Lance Stasinski";var e=Object(u.useContext)(h.a),t=Object(u.useState)(!0),n=Object(s.a)(t,2),a=n[0],l=n[1],v=Object(f.a)(),w=v.isLoading,g=v.error,k=v.sendRequest,C=v.clearError,N=function(){var t=Object(o.a)(c.a.mark((function t(n){var r,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=12;break}return t.prev=1,t.next=4,k("".concat(x,"/auth/login"),"POST",JSON.stringify({username:n.username,password:n.password}),{"Content-Type":"application/json"});case 4:r=t.sent,e.login(r.userId,r.token,r.username),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:t.next=21;break;case 12:return t.prev=12,t.next=15,k("".concat(x,"/auth/signup"),"POST",JSON.stringify({username:n.username,password:n.password,confirmPassword:n.confirmPassword}),{"Content-Type":"application/json"});case 15:o=t.sent,e.login(o.userId,o.token,o.username),t.next=21;break;case 19:t.prev=19,t.t1=t.catch(12);case 21:case"end":return t.stop()}}),t,null,[[1,8],[12,19]])})));return function(e){return t.apply(this,arguments)}}(),y=Object(d.a)({mode:"onChange"}),S=y.register,P=y.formState.errors,E=y.handleSubmit,A=y.watch,B=Object(u.useRef)();B.current=A("password","");return Object(O.jsxs)(i.a.Fragment,{children:[Object(O.jsx)(p.a,{error:g,onClear:C}),Object(O.jsxs)("div",{className:b.a.auth,children:[Object(O.jsxs)(j.a,{className:b.a["auth-card"],children:[w&&Object(O.jsx)(_.a,{asOverlay:!0}),Object(O.jsx)("div",{className:b.a["auth-card-header"],children:Object(O.jsx)("h2",{children:a?"LOGIN":"SIGNUP"})}),Object(O.jsxs)("form",{onSubmit:E((function(e){return N(e)})),className:b.a["auth-form"],children:[Object(O.jsx)("label",{htmlFor:"username",children:"Username"}),Object(O.jsx)("input",Object(r.a)(Object(r.a)({},S("username",{required:!0})),{},{className:P.username&&b.a["input-error"]})),P.username&&Object(O.jsx)("p",{children:"Username required."}),Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",Object(r.a)(Object(r.a)({type:"password"},S("password",{required:!0,minLength:6})),{},{className:P.username&&b.a["input-error"]})),P.password&&Object(O.jsx)("p",{children:"Password must be at least 6 characters."}),!a&&Object(O.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm password"}),!a&&Object(O.jsx)("input",Object(r.a)({type:"password"},S("confirmPassword",{validate:function(e){return e===B.current||"Passwords must match."}}))),!a&&P.confirmPassword&&Object(O.jsx)("p",{children:P.confirmPassword.message}),Object(O.jsx)(m.a,{type:"submit",children:"submit"})]})]}),Object(O.jsx)(m.a,{inverse:!0,onClick:function(){l((function(e){return!e}))},className:b.a["switch-btn"],children:a?"SIGNUP":"LOGIN"})]})]})}},51:function(e,t,n){"use strict";n(1);var r=n(10),a=n(56),c=n.n(a),o=n(0);t.a=function(e){return e.href?Object(o.jsx)("a",{className:"\n          ".concat(e.className,"\n          ").concat(c.a.button,"\n          ").concat(c.a["button--".concat(e.size||"default")],"\n          ").concat(e.inverse&&c.a["button--inverse"],"\n          ").concat(e.danger&&c.a["button--danger"],"\n        "),href:e.href,id:e.id,children:e.children}):e.to?Object(o.jsx)(r.b,{to:e.to,className:"\n          ".concat(e.className,"\n          ").concat(c.a.button,"\n          ").concat(c.a["button--".concat(e.size||"default")],"\n          ").concat(e.inverse&&c.a["button--inverse"],"\n          ").concat(e.danger&&c.a["button--danger"],"\n        "),id:e.id,children:e.children}):Object(o.jsx)("button",{className:"\n        ".concat(e.className,"\n        ").concat(c.a.button,"\n        ").concat(c.a["button--".concat(e.size||"default")],"\n        ").concat(e.inverse&&c.a["button--inverse"],"\n        ").concat(e.danger&&c.a["button--danger"],"\n      "),type:e.type,onClick:e.onClick,disabled:e.disabled,id:e.id,children:e.children})}},52:function(e,t,n){"use strict";var r=n(55),a=n(1),c=n.n(a),o=n(8),s=n.n(o),u=n(50),i=n(57),d=n.n(i),l=n(21),b=n(0),h=function(e){var t=Object(b.jsxs)("div",{ref:e.nodeRef,className:"".concat(d.a.modal," ").concat(e.className),style:e.style,children:[Object(b.jsx)("header",{className:"".concat(d.a.modal__header," ").concat(e.headerClass),children:Object(b.jsx)("h2",{children:e.header})}),Object(b.jsxs)("form",{onSubmit:e.onSumbit?e.onSumbit:function(e){return e.preventDefault()},children:[Object(b.jsx)("div",{className:"".concat(d.a.modal__content," ").concat(e.contentClass),children:e.children}),Object(b.jsx)("footer",{className:"".concat(d.a.modal__footer," ").concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))};t.a=function(e){var t=c.a.useRef(null);return Object(b.jsxs)(c.a.Fragment,{children:[e.show&&Object(b.jsx)(l.a,{onClick:e.onCancel,backdropClass:e.backdropClass}),Object(b.jsx)(u.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:300,classNames:"modal-transition",nodeRef:t,children:Object(b.jsx)(h,Object(r.a)(Object(r.a)({},e),{},{nodeRef:t}))})]})}},56:function(e,t,n){e.exports={button:"Button_button__1rdVi","button--inverse":"Button_button--inverse__-1_92","button--danger":"Button_button--danger__Vl4FB","button--small":"Button_button--small__27bKE","button--big":"Button_button--big__2-DUE"}},57:function(e,t,n){e.exports={modal:"Modal_modal__3BvLd",modal__header:"Modal_modal__header__gy2sw",modal__content:"Modal_modal__content__Q822G",modal__footer:"Modal_modal__footer__2mvrH"}},58:function(e,t,n){"use strict";n(1);var r=n(59),a=n.n(r),c=n(0);t.a=function(e){return Object(c.jsx)("div",{className:"".concat(e.className," ").concat(a.a.card),style:e.style,children:e.children})}},59:function(e,t,n){e.exports={card:"Card_card__ATtpb"}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(53),a=n.n(r),c=n(54),o=n(9),s=n(1),u=function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],u=Object(s.useState)(),i=Object(o.a)(u,2),d=i[0],l=i[1],b=Object(s.useRef)([]),h=Object(s.useCallback)(function(){var e=Object(c.a)(a.a.mark((function e(t){var n,c,o,s,u,i,d=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:"GET",c=d.length>2&&void 0!==d[2]?d[2]:null,o=d.length>3&&void 0!==d[3]?d[3]:void 0,r(!0),s=new AbortController,b.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:c,headers:o,signal:s.signal});case 9:return u=e.sent,e.next=12,u.json();case 12:if(i=e.sent,b.current=b.current.filter((function(e){return e!==s})),u.ok){e.next=16;break}throw new Error(i.message);case 16:return r(!1),e.abrupt("return",i);case 20:throw e.prev=20,e.t0=e.catch(6),l(e.t0.message),r(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(s.useEffect)((function(){return function(){b.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:d,sendRequest:h,clearError:function(){l(void 0)}}}},61:function(e,t,n){"use strict";n(1);var r=n(52),a=n(51),c=n(62),o=n.n(c),s=n(0);t.a=function(e){return Object(s.jsx)(r.a,{onCancel:e.onClear,header:"An error occurred!",show:!!e.error,footer:Object(s.jsx)(a.a,{inverse:!0,onClick:e.onClear,children:"Okay"}),backdropClass:o.a["error-backdrop"],footerClass:o.a["error-footer"],style:{border:"1pt solid #f7e0ad"},children:Object(s.jsx)("p",{children:e.error})})}},62:function(e,t,n){e.exports={"error-backdrop":"ErrorModal_error-backdrop__Co0CD","error-footer":"ErrorModal_error-footer__2mG7c"}},90:function(e,t,n){e.exports={auth:"Auth_auth__1ov2h","auth-card":"Auth_auth-card__2GSud","auth-card-header":"Auth_auth-card-header__2BxVg","auth-form":"Auth_auth-form__3YY8_","input-error":"Auth_input-error__j5pr_","switch-btn":"Auth_switch-btn__x1OMn"}}}]);
//# sourceMappingURL=10.a2648774.chunk.js.map
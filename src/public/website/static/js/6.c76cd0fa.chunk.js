(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{314:function(e,t,n){e.exports={"post-not-found-wrapper":"Post_post-not-found-wrapper__12ynM","post-not-found":"Post_post-not-found__1_L7y","post-wrapper":"Post_post-wrapper__2O4LG","open-links":"Post_open-links__3KT9A",chevron:"Post_chevron__3JD-s",post:"Post_post__27pu7",headImg:"Post_headImg__27d4a",tags:"Post_tags__2AHwL",tag:"Post_tag__V_rcN","header-text":"Post_header-text__2onfJ",dates:"Post_dates__2naAr","created-date":"Post_created-date__3f3l2","updated-date":"Post_updated-date__MTHBt",caption:"Post_caption__Y5E-T","content-paragraph":"Post_content-paragraph__qLwpF","content-header":"Post_content-header__2fjeR",references:"Post_references__2tHFL","admin-buttons":"Post_admin-buttons__3lRAY","modal-backdrop":"Post_modal-backdrop__WeaUB"}},315:function(e,t,n){e.exports={"comment-wrapper":"Comment_comment-wrapper__3H6sZ",comment:"Comment_comment__1gtt_","comment-single":"Comment_comment-single__2MsVC","comment-header":"Comment_comment-header__1DkGU",date:"Comment_date__2r5MH","delete-btn":"Comment_delete-btn__1zkgL","modal-backdrop":"Comment_modal-backdrop__2Bdqm"}},316:function(e,t,n){e.exports={"comment-section":"CommentSection_comment-section__3zdnw"}},317:function(e,t,n){e.exports={"post-links":"PostLinks_post-links__1AtrD","active-link":"PostLinks_active-link__Wpm0m"}},318:function(e,t,n){e.exports={"links-drawer":"PostLinksDrawer_links-drawer__2C90B"}},331:function(e,t,n){"use strict";n.r(t);var c=n(77),a=n(52),o=n.n(a),r=n(53),s=n(9),i=n(1),d=n.n(i),l=n(326),u=n(2),j=n(101),m=n.n(j),b=n(314),h=n.n(b),p=n(55),_=n(10),O=n(78),x=n(12),f=n(315),g=n.n(f),v=n(54),C=n(51),k=n(0),N=function(e){var t=Object(i.useContext)(x.a),n=Object(i.useState)(!1),c=Object(s.a)(n,2),a=c[0],o=c[1],r=function(){o(!1)};return Object(k.jsxs)(d.a.Fragment,{children:[Object(k.jsx)(v.a,{show:a,onCancel:r,header:"Are you sure?",footer:Object(k.jsxs)(d.a.Fragment,{children:[Object(k.jsx)(C.a,{type:"button",onClick:r,children:"CANCEL"}),Object(k.jsx)(C.a,{type:"button",danger:!0,onClick:function(){e.onDelete(e.commentId),o(!1)},children:"DELETE"})]}),backdropClass:g.a["modal-backdrop"],children:Object(k.jsx)("p",{children:"Do you want to delete this comment? This cannot be undone."})}),Object(k.jsxs)("div",{className:g.a["comment-wrapper"],children:[Object(k.jsx)("div",{className:g.a.comment,children:Object(k.jsxs)("div",{className:g.a["comment-single"],children:[Object(k.jsxs)("div",{className:g.a["comment-header"],children:[Object(k.jsx)("h3",{children:e.userName}),Object(k.jsx)("h3",{className:g.a.date,children:e.date})]}),Object(k.jsx)("p",{children:e.children})]})}),t.isLoggedIn&&e.userId===t.userId&&Object(k.jsx)("div",{className:g.a["delete-btn"],children:Object(k.jsx)("button",{type:"button",onClick:function(){o(!0)},children:"Delete"})})]})]})},y=n(58),w=n(316),E=n.n(w),I=function(e){var t=Object(i.useContext)(x.a),n=Object(O.a)({mode:"onChange"}),c=n.register,a=n.reset,o=n.formState.isValid,r=n.handleSubmit,s=t.isLoggedIn?t.isLoggedIn&&0===e.comments.length?"Be the first to add a comment...":"Add a comment...":"Login to add a comment.";return Object(k.jsx)(d.a.Fragment,{children:Object(k.jsxs)(y.a,{className:E.a["comment-section"],children:[Object(k.jsx)("header",{children:Object(k.jsx)("h3",{children:"Comments"})}),Object(k.jsx)("div",{children:Object(k.jsx)("ul",{children:e.comments.map((function(t){return Object(k.jsx)("li",{children:Object(k.jsx)(N,{userName:t.username,userId:t.creatorId,commentId:t._id,onDelete:e.onDeleteComment,date:t.date,children:t.comment})},t._id)}))})}),e.comments.length>0&&Object(k.jsx)("hr",{}),Object(k.jsxs)("form",{onSubmit:r((function(t){e.onAddComment(t),a({newComment:null})})),children:[Object(k.jsx)("input",Object(p.a)(Object(p.a)({},c("newComment",{required:!0})),{},{placeholder:s})),t.isLoggedIn?Object(k.jsx)(C.a,{type:"submit",disabled:!o,children:"submit"}):Object(k.jsx)(_.b,{to:"/auth",children:"LOGIN"})]})]})})},L=n(60),P=n(61),D=n(22),A=n(24),S=n(317),B=n.n(S),M=function(e){var t=e.posts.reverse();return Object(k.jsx)("nav",{className:B.a["post-links"],children:Object(k.jsxs)("ul",{children:[Object(k.jsx)("li",{children:Object(k.jsx)(_.c,{to:"/blog",activeClassName:B.a["active-link"],exact:!0,children:"Blog Home"})}),t.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsx)(_.c,{to:"".concat(e.title.replace(/\s/g,"-")),activeClassName:B.a["active-link"],exact:!0,children:e.title})},e._id)}))]})})},T=n(8),R=n.n(T),F=n(50),H=n(318),z=n.n(H),G=function(e){var t=Object(i.useRef)(null),n=Object(k.jsx)(F.a,{in:e.show,timeout:200,classNames:"slide-in-right",mountOnEnter:!0,unmountOnExit:!0,nodeRef:t,children:Object(k.jsx)("aside",{ref:t,onMouseLeave:e.onHoverAway,onClick:e.onClick,className:z.a["links-drawer"],children:e.children})}),c=document.getElementById("bloglinks-hook");return R.a.createPortal(n,c)},U=n(21),q=n(319),J=n.n(q),V=function(e){return Object(k.jsx)("p",{className:e.className,dangerouslySetInnerHTML:{__html:J.a.sanitize(e.text)}})},Y="http://localhost:8080/api";t.default=function(){var e=Object(u.h)().postId,t=Object(i.useState)(),n=Object(s.a)(t,2),a=n[0],j=n[1],b=Object(i.useState)([]),p=Object(s.a)(b,2),_=p[0],O=p[1],f=Object(i.useState)([]),g=Object(s.a)(f,2),N=g[0],w=g[1],E=Object(i.useState)(!1),S=Object(s.a)(E,2),B=S[0],T=S[1],R=Object(i.useState)(!1),F=Object(s.a)(R,2),H=F[0],z=F[1],q=Object(u.g)(),J=Object(i.useContext)(x.a),K=Object(i.useContext)(A.a),W=Object(L.a)(),Q=W.isLoading,Z=W.error,X=W.sendRequest,$=W.clearError;K.clearContext(),Object(i.useEffect)((function(){var t=function(){var t=Object(r.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,X("".concat(Y,"/blog/posts/").concat(e.replaceAll("-"," ")));case 3:n=t.sent,j(n.post),document.title=n.post.title||"Post Not Found",w(n.posts),O(n.post.comments),Object(l.a)("".concat("http://localhost:8080")).on("comments",(function(e){"create"===e.action?ee(e.comment):"delete"===e.action&&te(e.commentId)})),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();t()}),[X,e]);var ee=function(e){O((function(t){return[].concat(Object(c.a)(t),[e])}))},te=function(e){O((function(t){return t.filter((function(t){return t._id!==e}))}))},ne=Object(i.useCallback)(function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X("".concat(Y,"/blog/comment"),"POST",JSON.stringify({newComment:t.newComment,userId:J.userId,postId:null===a||void 0===a?void 0:a._id,date:(new Date).toLocaleDateString()}),{"Content-Type":"application/json",Authorization:"Bearer "+J.token});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[J.token,J.userId,null===a||void 0===a?void 0:a._id,X]),ce=Object(i.useCallback)(function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X("".concat(Y,"/blog/comment/").concat(t),"DELETE",{},{Authorization:"Bearer "+J.token});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[J.token,X]),ae=function(){var e=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,X("".concat(Y,"/blog/delete/").concat(null===a||void 0===a?void 0:a._id),"DELETE",{},{Authorization:"Bearer "+J.token});case 3:q.push("/blog"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){T(!1)},re=function(){z(!0)},se=function(){z(!1)};return Object(k.jsxs)(d.a.Fragment,{children:[Object(k.jsx)(v.a,{show:B,onCancel:oe,header:"Delete post?",footer:Object(k.jsxs)(d.a.Fragment,{children:[Object(k.jsx)(C.a,{type:"button",onClick:oe,children:"CANCEL"}),Object(k.jsx)(C.a,{type:"button",onClick:ae,danger:!0,children:"DELETE"})]}),backdropClass:h.a["modal-backdrop"],children:"Are you sure you want to delete this post?"}),H&&Object(k.jsx)(U.a,{onClick:se}),Object(k.jsx)(P.a,{error:Z,onClear:$}),Q&&!a&&Object(k.jsx)(D.a,{asOverlay:!0}),!Q&&!a&&Object(k.jsx)("div",{className:h.a["post-not-found-wrapper"],children:Object(k.jsxs)(y.a,{className:h.a["post-not-found"],children:[Object(k.jsx)("h2",{children:"Post Not Found!"}),Object(k.jsx)(C.a,{to:"/blog",children:"Back"})]})}),!Q&&a&&Object(k.jsxs)("div",{className:h.a["post-wrapper"],children:[!H&&Object(k.jsx)("button",{type:"button",onMouseEnter:re,onClick:re,className:h.a["open-links"],children:Object(k.jsx)("i",{className:h.a.chevron})}),Object(k.jsx)(G,{onHoverAway:se,onClick:se,show:H,children:Object(k.jsx)(M,{posts:N})}),Object(k.jsxs)("div",{className:h.a.post,children:[Object(k.jsxs)("header",{children:[Object(k.jsxs)("div",{className:h.a["header-text"],children:[Object(k.jsx)("h1",{id:"title",children:a.title}),Object(k.jsxs)("div",{className:h.a.dates,children:[Object(k.jsx)("time",{className:h.a["created-date"],dateTime:new Date("".concat(a.month," ").concat(a.day,", ").concat(a.year)).toString(),children:"".concat(a.month," ").concat(a.day,", ").concat(a.year)}),a.updatedMonth&&!(a.month===a.updatedMonth&&a.day===a.updatedDay&&a.year===a.updatedYear)&&Object(k.jsxs)("p",{className:h.a["updated-date"],children:["Updated"," ",Object(k.jsx)("time",{dateTime:new Date("".concat(a.updatedMonth," ").concat(a.updatedDay,", ").concat(a.updatedYear)).toString(),children:"".concat(a.updatedMonth," ").concat(a.updatedDay,", ").concat(a.updatedYear)})]})]})]}),Object(k.jsx)("div",{className:h.a.tags,children:a.tags.split(", ").map((function(e,t){return Object(k.jsx)("div",{className:h.a.tag,children:e.toLowerCase()},"tag".concat(t))}))}),Object(k.jsx)("img",{src:a.headImg,alt:a.headImgAlt,className:h.a.headImg}),Object(k.jsx)("p",{className:h.a.caption,children:a.headImgCaption})]}),Object(k.jsxs)("article",{children:[a.content.map((function(e){return"paragraph"===e.type?Object(k.jsx)(V,{className:h.a["content-paragraph"],text:e.text},e._id):"image"===e.type||"imageUrl"===e.type?Object(k.jsxs)(d.a.Fragment,{children:[Object(k.jsx)("img",{src:e.text,alt:e.alt},e._id),Object(k.jsx)("p",{className:h.a.caption,children:e.caption})]}):"heading"===e.type?Object(k.jsx)("h2",{className:h.a["content-header"],children:e.text},e._id):"code"===e.type?Object(k.jsx)("pre",{children:Object(k.jsx)("code",{children:Object(k.jsx)(m.a,{className:e.language,children:e.text})})},Math.random()):Object(k.jsx)("div",{children:"Error: Content type ".concat(e.type," not supported.")},Math.random())})),Object(k.jsxs)("section",{className:h.a.references,children:[Object(k.jsx)("h2",{children:"Additional Resources"}),Object(k.jsx)("ul",{children:a.references.map((function(e){return Object(k.jsx)("li",{children:Object(k.jsxs)("cite",{children:[e.authors,". (",e.date,"). ",Object(k.jsx)("i",{children:e.title}),". URL:"," ",Object(k.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.url})]})},e.title)}))})]})]}),"619670d89157143ae678d88d"===J.userId&&Object(k.jsxs)("div",{className:h.a["admin-buttons"],children:[Object(k.jsx)(C.a,{type:"button",onClick:function(){K.setContext(a._id,a.title,a.blurb,a.tags,a.headImg,a.headImgCaption,a.headImgAlt,a.content,a.references),q.push("/blog/create")},children:"Edit"}),Object(k.jsx)(C.a,{type:"button",danger:!0,onClick:function(){T(!0)},children:"Delete"})]}),Object(k.jsx)("section",{children:Object(k.jsx)(I,{postId:a._id,comments:_,onDeleteComment:ce,onAddComment:ne})})]})]})]})}},51:function(e,t,n){"use strict";n(1);var c=n(10),a=n(56),o=n.n(a),r=n(0);t.a=function(e){return e.href?Object(r.jsx)("a",{className:"\n          ".concat(e.className,"\n          ").concat(o.a.button,"\n          ").concat(o.a["button--".concat(e.size||"default")],"\n          ").concat(e.inverse&&o.a["button--inverse"],"\n          ").concat(e.danger&&o.a["button--danger"],"\n        "),href:e.href,id:e.id,children:e.children}):e.to?Object(r.jsx)(c.b,{to:e.to,className:"\n          ".concat(e.className,"\n          ").concat(o.a.button,"\n          ").concat(o.a["button--".concat(e.size||"default")],"\n          ").concat(e.inverse&&o.a["button--inverse"],"\n          ").concat(e.danger&&o.a["button--danger"],"\n        "),id:e.id,children:e.children}):Object(r.jsx)("button",{className:"\n        ".concat(e.className,"\n        ").concat(o.a.button,"\n        ").concat(o.a["button--".concat(e.size||"default")],"\n        ").concat(e.inverse&&o.a["button--inverse"],"\n        ").concat(e.danger&&o.a["button--danger"],"\n      "),type:e.type,onClick:e.onClick,disabled:e.disabled,id:e.id,children:e.children})}},54:function(e,t,n){"use strict";var c=n(55),a=n(1),o=n.n(a),r=n(8),s=n.n(r),i=n(50),d=n(57),l=n.n(d),u=n(21),j=n(0),m=function(e){var t=Object(j.jsxs)("div",{ref:e.nodeRef,className:"".concat(l.a.modal," ").concat(e.className),style:e.style,children:[Object(j.jsx)("header",{className:"".concat(l.a.modal__header," ").concat(e.headerClass),children:Object(j.jsx)("h2",{children:e.header})}),Object(j.jsxs)("form",{onSubmit:e.onSumbit?e.onSumbit:function(e){return e.preventDefault()},children:[Object(j.jsx)("div",{className:"".concat(l.a.modal__content," ").concat(e.contentClass),children:e.children}),Object(j.jsx)("footer",{className:"".concat(l.a.modal__footer," ").concat(e.footerClass),children:e.footer})]})]});return s.a.createPortal(t,document.getElementById("modal-hook"))};t.a=function(e){var t=o.a.useRef(null);return Object(j.jsxs)(o.a.Fragment,{children:[e.show&&Object(j.jsx)(u.a,{onClick:e.onCancel,backdropClass:e.backdropClass}),Object(j.jsx)(i.a,{in:e.show,mountOnEnter:!0,unmountOnExit:!0,timeout:300,classNames:"modal-transition",nodeRef:t,children:Object(j.jsx)(m,Object(c.a)(Object(c.a)({},e),{},{nodeRef:t}))})]})}},56:function(e,t,n){e.exports={button:"Button_button__1rdVi","button--inverse":"Button_button--inverse__-1_92","button--danger":"Button_button--danger__Vl4FB","button--small":"Button_button--small__27bKE","button--big":"Button_button--big__2-DUE"}},57:function(e,t,n){e.exports={modal:"Modal_modal__3BvLd",modal__header:"Modal_modal__header__gy2sw",modal__content:"Modal_modal__content__Q822G",modal__footer:"Modal_modal__footer__2mvrH"}},58:function(e,t,n){"use strict";n(1);var c=n(59),a=n.n(c),o=n(0);t.a=function(e){return Object(o.jsx)("div",{className:"".concat(e.className," ").concat(a.a.card),style:e.style,children:e.children})}},59:function(e,t,n){e.exports={card:"Card_card__ATtpb"}},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var c=n(52),a=n.n(c),o=n(53),r=n(9),s=n(1),i=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(),d=Object(r.a)(i,2),l=d[0],u=d[1],j=Object(s.useRef)([]),m=Object(s.useCallback)(function(){var e=Object(o.a)(a.a.mark((function e(t){var n,o,r,s,i,d,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",o=l.length>2&&void 0!==l[2]?l[2]:null,r=l.length>3&&void 0!==l[3]?l[3]:void 0,c(!0),s=new AbortController,j.current.push(s),e.prev=6,e.next=9,fetch(t,{method:n,body:o,headers:r,signal:s.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(d=e.sent,j.current=j.current.filter((function(e){return e!==s})),i.ok){e.next=16;break}throw new Error(d.message);case 16:return c(!1),e.abrupt("return",d);case 20:throw e.prev=20,e.t0=e.catch(6),u(e.t0.message),c(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);return Object(s.useEffect)((function(){return function(){j.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:l,sendRequest:m,clearError:function(){u(void 0)}}}},61:function(e,t,n){"use strict";n(1);var c=n(54),a=n(51),o=n(62),r=n.n(o),s=n(0);t.a=function(e){return Object(s.jsx)(c.a,{onCancel:e.onClear,header:"An error occurred!",show:!!e.error,footer:Object(s.jsx)(a.a,{inverse:!0,onClick:e.onClear,children:"Okay"}),backdropClass:r.a["error-backdrop"],footerClass:r.a["error-footer"],style:{border:"1pt solid #f7e0ad"},children:Object(s.jsx)("p",{children:e.error})})}},62:function(e,t,n){e.exports={"error-backdrop":"ErrorModal_error-backdrop__Co0CD","error-footer":"ErrorModal_error-footer__2mG7c"}}}]);
//# sourceMappingURL=6.c76cd0fa.chunk.js.map